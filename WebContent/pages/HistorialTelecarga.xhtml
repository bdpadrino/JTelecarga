<?xml version="1.0" encoding="UTF-8"?>
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:p="http://primefaces.org/ui"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:adm="http://github.com/adminfaces"
                template="/WEB-INF/templates/plantilla.xhtml">
	
	    
    <ui:define name="title">
       Telecargas
    </ui:define>

    <ui:define name="description">
        Telecargas efectuadas en dispositivos POS
    </ui:define>

    <ui:define name="body">
    	<f:metadata>
        </f:metadata>
   		 <adm:breadcrumb title="Historial de Telecargas"/>

     	 <div class="box box-primary"> 
         	<h:form id="form">
	         	<div class="box-header with-border">
	         	  
	              	<p:commandButton action="#" ajax="false" icon="fa fa-plus"
	                   	            value="Agregar" styleClass="btn-primary"/>
	              	<p:spacer width="5"/>
	                <p:commandButton value="Eliminar" icon="fa fa-trash" styleClass="btn-danger"
	                                 update="tableStateDT" actionListener="#{telecargaBean.eliminarTelecarga}"/>
	                <p:spacer width="5"/>
	                
	                <p:separator/>
	         
	          </div> <!--  box -header -->
	          <div class="box-body">                                   
	              
   				<p:dataTable id="tableStateDT" var="tele" value="#{telecargaBean.listTelecargas}" widgetVar="teleTable" multiViewState="true"
	                 rows="10" paginator="true" paginatorPosition="bottom" 
	                 paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
	                 rowsPerPageTemplate="5,10,15,20"
	                 selectionMode="single" selection="#{telecargaBean.telecarga}" rowKey="#{tele.rqtKey}"
	                 emptyMessage="No hay Telecargas" >
	                
	 
			        <f:facet name="header">
			            <p:outputPanel>
			            	<div align="right">
				                <h:outputText value="Search all fields: " />
				                <p:inputText id="globalFilter" onkeyup="PF('teleTable').filter()" style="width:150px" placeholder="Enter keyword"/>
			           		</div>
			            </p:outputPanel>
		        	</f:facet>
		 
		  			<p:column headerText="Id" priority="1" width ="50" >
			            <h:outputText value="#{tele.rqtKey}" />
			        </p:column>
			        	        
			        <p:column headerText="Numero de folio" priority="1" filterBy="#{tele.tcFolio}" sortBy="#{tele.tcFolio}" filterMatchMode="contains">
			            <h:outputText value="#{tele.tcFolio}" />
			        </p:column>

			        <p:column headerText="AplicaciÃ³n" priority="1" filterBy="#{tele.appDesc}" sortBy="#{tele.appDesc}" filterMatchMode="contains">
			            <h:outputText value="#{tele.appDesc}" />
			        </p:column>
			        
			        <p:column headerText="Nombre del comercio" priority="3" filterBy="#{tele.commerceName}" sortBy="#{tele.commerceName}" filterMatchMode="contains">
			            <h:outputText value="#{tele.commerceName}" />
			        </p:column>
			        
			        
			         <p:column headerText="Fecha orden de trabajo" priority="2" filterBy="#{tele.orderDate}" sortBy="#{tele.orderDate}" filterMatchMode="contains">
					     <h:outputText value="#{tele.orderDate}">
			            	<f:convertDateTime pattern="dd/MM/yyyy" />
			            </h:outputText>
					</p:column>
					
			         <p:column headerText="Marca" priority="1" filterBy="#{tele.terminalMark}" sortBy="#{tele.terminalMark}" filterMatchMode="contains">
					    <h:outputText value="#{tele.terminalMark}" />
					</p:column>
					
					<p:column headerText="Modelo" priority="1" filterBy="#{tele.terminalModel}" sortBy="#{tele.terminalModel}" filterMatchMode="contains">
					    <h:outputText value="#{tele.terminalModel}" />
					</p:column>
					
					<p:column headerText="Serial" priority="3" filterBy="#{tele.commerceName}" sortBy="#{tele.commerceName}" filterMatchMode="contains">
			            <h:outputText value="#{tele.terId}" />
			        </p:column>
					<!--
					<f:facet name="footer">
			            <p:commandButton process="tableStateDT" update=":form:carDetail" icon="ui-icon-search" value="View" oncomplete="PF('teleDialog').show()" />
			        </f:facet>
					-->												       
	 			</p:dataTable>
	 			
	 			<p:contextMenu for="tableStateDT">
			        <p:menuitem value="Ver Detalle" icon="ui-icon-search" action="TelecargaDetail.xhtml?faces-redirect=true"/>
			        	
			        <p:menuitem value="Ver Detalle2" icon="ui-icon-search" outcome="TelecargaDetail.xhtml">
				        <f:param name="telecarga" value="#{telecargaBean.listTelecargas}" />
				        <f:param name="bdu" value="#{telecargaBean.listBdus}" />
			            <f:param name="productId" value="30" />
				        
			      </p:menuitem>  
			        <p:menuitem value="Eliminar" update="tableStateDT" icon="ui-icon-close" actionListener="#{telecargaBean.eliminarTelecarga}"/>
			    </p:contextMenu>
		   	  </div> <!-- box-body -->
	   	   </h:form> 
		</div>  <!-- box-primary -->        	        
    
    </ui:define>

</ui:composition>
